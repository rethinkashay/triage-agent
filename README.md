# Triage Agent

Triage Agent is a local API and UI solution for medical triage automation. It leverages retrieval-augmented generation using sentence-transformers and FAISS for guideline search, and integrates with Gemini/OpenAI for structured triage recommendations. Designed for extensibility and privacy, it enables healthcare teams to automate and streamline triage processes using custom guidelines.

---

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Usage](#usage)
- [API Reference](#api-reference)
- [UI Guide](#ui-guide)
- [Configuration](#configuration)
- [Contributing](#contributing)
- [License](#license)
- [Contact](#contact)

---

## Overview

Triage Agent provides a local, privacy-preserving triage automation platform. It retrieves relevant medical guidelines using semantic search, then uses LLMs (Gemini/OpenAI) to generate structured triage outputs. The system is suitable for clinics, telemedicine platforms, and research teams seeking to automate triage based on custom protocols.

---

## Features

- **Retrieval-Augmented Generation:** Uses sentence-transformers and FAISS for fast, semantic guideline search.
- **LLM Integration:** Supports Gemini and OpenAI for structured triage recommendations.
- **Custom Guidelines:** Easily add your own medical guideline `.txt` files.
- **REST API:** Simple endpoints for triage queries.
- **Web UI:** User-friendly interface for manual triage.
- **Local Deployment:** Runs entirely on your infrastructure for privacy and control.

---

## Architecture

- **Backend:** FastAPI application (`app.main`) exposes REST endpoints.
- **Retrieval Engine:** Sentence-transformers for embedding, FAISS for similarity search.
- **LLM Service:** Gemini/OpenAI integration for triage reasoning.
- **Frontend:** Simple web UI for manual triage and guideline management.

---

## Prerequisites

- **Python:** 3.10 (recommended)
- **Conda:** For environment management
- **API Keys:** Gemini or OpenAI API key (optional, for LLM features)

---

## Installation

1. **Clone the repository:**
   ```sh
   git clone https://github.com/your-org/triage-agent.git
   cd triage-agent
   ```

2. **Create and activate a Conda environment:**
   ```sh
   conda create -n triage-agent python=3.10
   conda activate triage-agent
   ```

3. **Install dependencies:**
   ```sh
   pip install -r requirements.txt
   ```

4. **Add guideline files:**
   - Place your guideline `.txt` files in the `data/` directory (e.g., `fever_guidelines.txt`).

5. **Set API keys (optional, for LLM features):**
   - **Gemini:**  
     Windows (temporary):  
     ```sh
     set GEMINI_API_KEY=YOUR_KEY
     ```
     Linux/macOS:  
     ```sh
     export GEMINI_API_KEY=YOUR_KEY
     ```
   - **OpenAI:**  
     ```sh
     export OPENAI_API_KEY=YOUR_KEY
     ```

---

## Usage

### Run the API server

```sh
uvicorn app.main:app --reload --port 8000
```

### Access the Web UI

Open your browser and visit:  
[http://127.0.0.1:8000/ui](http://127.0.0.1:8000/ui)

---

## API Reference

- **POST `/triage`**  
  Submit a triage query and receive structured recommendations.
  - **Body:**  
    ```json
    {
      "symptoms": "fever, cough",
      "age": 35,
      "guideline": "fever_guidelines.txt"
    }
    ```
  - **Response:**  
    Structured triage output (JSON).

- **GET `/guidelines`**  
  List available guideline files.

- **GET `/ui`**  
  Access the web UI.

---

## UI Guide

- **Guideline Selection:** Choose from uploaded guideline files.
- **Symptom Input:** Enter patient symptoms and details.
- **Triage Output:** View structured recommendations generated by the agent.

---

## Configuration

- **Guideline Files:** Place `.txt` files in `data/`.
- **Environment Variables:**  
  - `GEMINI_API_KEY` (for Gemini integration)  
  - `OPENAI_API_KEY` (for OpenAI integration)

- **Port:** Default is `8000`, configurable via the `uvicorn` command.

---

## Contributing

Contributions are welcome! Please submit issues or pull requests via GitHub.

---

## License

This project is licensed under the MIT License. See [LICENSE](LICENSE) for details.

---

## Contact

For questions or support, contact [your-email@example.com](mailto:your-email@example.com).